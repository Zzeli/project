<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <title>登录</title>
    <link rel="stylesheet" href="../css/weui.css"/>
    <link rel="stylesheet" href="../css/example.css"/>
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/login.css">
</head>
<body ontouchstart>

<div class="container" id="container" style="padding-top: 1.02rem">

    <div class="js_dialog" id="iosDialog1" style="display: none;">
        <div class="weui-mask"></div>
        <div class="weui-dialog">
            <div class="weui-dialog__bd">请输入正确的手机号码</div>
            <div class="weui-dialog__ft">
                <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary">知道了</a>
            </div>
        </div>
    </div>


    <div class="weui-msg">
        <div class="weui-msg__icon-area"><img src="../images/logo-2.png" alt=""></div>
        <div class="weui-msg__text-area">
            <h2 class="weui-msg__title">羙猴网</h2>
            <p class="weui-msg__desc">MEIHOU NETWORK</p>
        </div>
        <form action="" method="">
        <div class="weui-cells">
            <div class="weui-cell">
                <div class="weui-cell__bd">
                    <div class="weui-cell__hd"><img src="../images/iphone_number.png"></div>
                    <input class="weui-input" type="text" placeholder="请输入手机号码" id="input" name="user">
                </div>
            </div>
            <div class="weui-cell">
                <div class="weui-cell__bd">
                    <div class="weui-cell__hd"><img src="../images/code.png"></div>
                    <input class="weui-input" type="password" placeholder="请输入密码" name="password" id="password">
                </div>
            </div>
        </div>

        <div class="weui-msg__opr-area">
            <p class="weui-btn-area">
                <button type="submit" class="weui-btn weui-btn_primary"  id="showIOSDialog1">登录</button>
            </p>
        </div>


            <div class="js_dialog" id="iosDialog3" style="display: none;">
                <div class="weui-mask"></div>
                <div class="weui-dialog">
                    <div class="weui-dialog__bd">手机号和密码不能为空</div>
                    <div class="weui-dialog__ft">
                        <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary">确定</a>
                    </div>
                </div>
            </div>


            <div class="js_dialog" id="iosDialog2" style="display: none;">
                <div class="weui-mask"></div>
                <div class="weui-dialog">
                    <div class="weui-dialog__bd">登录成功</div>
                    <div class="weui-dialog__ft">
                        <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary">确定</a>
                    </div>
                </div>
            </div>
<div class="label">
    <label class="weui_cell weui_check_label" for="s12">
        <div class="weui_cell_hd">
            <input type="checkbox" name="checkbox1" class="weui_check" id="s12">
            <i class="weui_icon_checked"></i>
        </div>
        <div class="weui_cell_bd weui_cell_primary">
            <p>记住密码</p>
        </div>
    </label>
    <div class="weui_cell_bd weui_cell_primary" style="display:flex; align-items:flex-end;">
            <p><a href="javascript:;" style="color: #18a6f0;">忘记密码？</a></p>
    </div>
</div>
    <div class="weui-flex">
        <div class="weui-flex__item">还没有账号？<a href="">立即注册</a></div>
    </div>

    </form>
</div>
</div>
</body>
</html>
<script src="../js/zepto.min.js"></script>
<script src="../js/jquery.js"></script>
<script>
    var inpEle = document.getElementById('input');

    var $iosDialog1 = $('#iosDialog1');
    var $iosDialog2 = $('#iosDialog2');
    var $iosDialog3 = $('#iosDialog3');

    var myreg = /^1([23578])\d{9}$/;
    inpEle.onblur = function(){
        var inpVal = this.value;
        if (!myreg.exec(inpVal)){
            inpEle.value="";
//            alert('请输入正确的手机号');
            $iosDialog1.fadeIn(0);
            $('.weui-dialog__ft .weui-dialog__btn').click(function () {
                $('#iosDialog1').off('click').hide();
            })
        }else{
//            alert('ok')
        }
    }

    var user = {
        username:$("#input").val(),
        password:$("#password").val()
    };

    $('#showIOSDialog1').on('click', function(){
            if ($(".weui-input").val() === ""){
                $iosDialog3.fadeIn(0);
                $('.weui-dialog__ft .weui-dialog__btn').click(function () {
                    $('#iosDialog3').off('click').hide();
                });
            }else if($(".weui-input").eq(1).val() === ""){
                $iosDialog3.fadeIn(0);
                $('.weui-dialog__ft .weui-dialog__btn').click(function () {
                    $('#iosDialog3').off('click').hide();
                });
            }else{
                console.log(user);

                $.ajax({
                    url:'UserAdd.action',
                    data:user,
                    type:'post',
                    dataType:'text',
                    success:function(msg){
                        if(msg=='1'){
                            $iosDialog2.fadeIn(0);
                            $('.weui-dialog__ft .weui-dialog__btn').click(function () {
                                $('#iosDialog2').off('click').hide();
                            });
                        }else{
                            console.log('添加失败')
                        }
                    }

                })
            }

    });


</script>
